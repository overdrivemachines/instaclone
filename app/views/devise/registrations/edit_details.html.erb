<section class="holygrail-content section-main">
  <div class="auth-container modal-content">
    <div class="auth-header">
      <h2 class="auth-title">Edit Account Details</h2>
      <h4>Change <%= link_to "Account Password", edit_user_registration_path %></h4>
    </div>

    <%= form_for(@user, url: users_save_details_path, data: { turbo: false }) do |f| %>
      <% if alert %>
        <div class="alert alert-danger">
          <%= alert %>
        </div>
      <% end %>
      <% if @user.errors.any? %>
        <div class="alert alert-danger">
          <h2>Error</h2>

          <ul>
            <% @user.errors.each do |error| %>
              <li><%= error.full_message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="auth-body">

        <div class="field">
          <%= f.label :full_name, "Name" %>
          <%= f.text_field :full_name, autocomplete: "off", class: "form-control" %>
        </div>

        <div class="field">
          <%= f.label :username, "Username (eg. happy123)" %>
          <%= f.text_field :username, autocomplete: "off", class: "form-control" %>
        </div>

        <hr>

        <div class="field">
          <%= f.label :avatar %>
          <% if @user.avatar.attached? %>
            <div class="d-flex">
              <div><%= image_tag current_user.avatar_as_thumbnail, class: "rounded" %></div>
            </div>
          <% end %>
          <%= f.file_field :avatar, class: "form-control" %>
        </div>

        <hr>

        <div class="field">
          <%= f.label :avatar_background %>
          <% if @user.avatar_background.attached? %>
            <div class="d-flex">
              <div><%= image_tag current_user.avatar_background_as_thumbnail, class: "rounded" %></div>
            </div>
          <% end %>
          <%= f.file_field :avatar_background, class: "form-control" %>
        </div>

        <div class="field">
          <%= f.label :bio, "Bio (140 characters maximum)" %>
          <%= f.text_area :bio, class: "form-control" %>
        </div>
      </div>

      <div class="auth-footer">
        <%= f.submit "Save", class: "btn btn-primary" %>
        <%= link_to "Cancel", :back, class: "btn btn-secondary mx-2" %>
      </div>
    <% end %>
  </div>
</section>
